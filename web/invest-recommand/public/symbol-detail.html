<!doctype html><html lang='ko'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>ì¢…ëª© ìƒì„¸ ê·¼ê±°</title><style>body{margin:0;background:#111315;color:#e5e7eb;font-family:Inter,Arial,sans-serif}.wrap{max-width:1100px;margin:auto;padding:20px}.card{background:#1a1d21;border:1px solid #2b3138;border-radius:12px;padding:14px;margin-top:12px}.muted{color:#9aa4b2}a{color:#cbd5e1}.h{font-size:28px;font-weight:700}.chartbox{height:360px;min-height:360px;background:#0f172a;border:1px solid #24304f;border-radius:10px;padding:6px;overflow:hidden}</style></head><body><div class='wrap'><div><a href='/invest-recommend'>â† ë©”ì¸ìœ¼ë¡œ</a></div><div id='head' class='card'>ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div><div id='quick' class='card'></div><div id='chart' class='card'><b>ê°€ê²© ì°¨íŠ¸ (ìº”ë“¤+ê±°ë˜ëŸ‰+MA20/60)</b><div id='chartArea' class='chartbox' style='margin-top:8px'></div></div><div id='plan' class='card'></div><div id='reasons' class='card'></div></div><script>function fmt(v,d=2){return (v===null||v===undefined)?'-':Number(v).toLocaleString(undefined,{maximumFractionDigits:d});}function pct(v,d=2){if(v===null||v===undefined||Number.isNaN(Number(v)))return '-';const n=Number(v);const s=n>0?'+':'';return `${s}${n.toLocaleString(undefined,{maximumFractionDigits:d})}%`;}function getSymbol(){const parts=location.pathname.split('/');return decodeURIComponent(parts[parts.length-1]||'').toUpperCase();}function longExplain(r){const c=r.components||{};const rc=c.reportConsensus||{};const t=c.technical||{};const m=c.momentum||{};const risk=c.risk||{};const crowd=c.crowd||{};const liq=c.liquidityScore;const s=Number(r.score||0);const rr=Number(r.riskReward||0);const ret1=Number(r.expectedReturnPct||0);const loss=Math.abs(Number(r.expectedLossPct||0));const edge=(ret1-loss).toFixed(2);return `
<b>1) íˆ¬ì ì•„ì´ë””ì–´ í•µì‹¬</b><br>
- ì´ ì¢…ëª©ì€ <b>ê¸°ëŒ€ìˆ˜ìµ(${pct(ret1)}) ëŒ€ë¹„ ì†ì‹¤(${pct(-loss)})ì˜ ë¹„ëŒ€ì¹­</b>ì„ ë…¸ë¦¬ëŠ” íŠ¸ë ˆì´ë“œ.
- í˜„ì¬ ì‹œìŠ¤í…œ ì¢…í•©ì ìˆ˜ëŠ” <b>${fmt(s)}</b>, RRì€ <b>${fmt(rr)}</b>ë¡œ ê³„ì‚°ë¨.
- ê°„ë‹¨íˆ ë§í•´: â€œí‹€ë¦´ ë•Œ ì‘ê²Œ ìƒê³ , ë§ì„ ë•Œ í¬ê²Œ ë¨¹ëŠ” êµ¬ì¡°â€ë¥¼ ëª©í‘œë¡œ í•œ ì…‹ì—….<br><br>

<b>2) ëª¨ë¸ ì ìˆ˜ í•´ë¶€ (ê°€ì¤‘ì¹˜ ê¸°ë°˜)</b><br>
- ì´ì  ê³µì‹: <code>0.35R + 0.25C + 0.15L + 0.10V + 0.15T</code><br>
- R(ë¦¬í¬íŠ¸/ê¸°ê´€): ${fmt(rc.score)} / C(ë‰´ìŠ¤êµ°ì¤‘): ${fmt(crowd.score)} / L(ìœ ë™ì„±): ${fmt(liq)} / V(ë¦¬ìŠ¤í¬): ${fmt(risk.score)} / T(ê¸°ìˆ ): ${fmt(t.score)}<br>
- ì ìˆ˜ í•´ì„: ë‹¨ì¼ ì§€í‘œ ëª°ë¹µì´ ì•„ë‹ˆë¼, <b>ì»¨ì„¼ì„œìŠ¤+ì°¨íŠ¸+ë¦¬ìŠ¤í¬</b>ë¥¼ ê· í˜• ë°˜ì˜í•œ ë‹¤ìš”ì¸ ìŠ¤ì½”ì–´.<br><br>

<b>3) ë¦¬í¬íŠ¸/ê¸°ê´€ í•©ì˜ (R)</b><br>
- í•©ì˜ì ìˆ˜: ${fmt(rc.score)}ì 
- ëª©í‘œê°€ ê´´ë¦¬: ${pct(rc.upsidePct)}
- ì¶”ì²œì§€ìˆ˜/ì˜ê²¬ìˆ˜: ${fmt(rc.recommendationMean)} / ${fmt(rc.analystOpinions,0)}
- í•´ì„: ëª©í‘œê°€ ê´´ë¦¬ê°€ í”ŒëŸ¬ìŠ¤ì´ê³  ì˜ê²¬ìˆ˜ê°€ ì¶©ë¶„í•˜ë©´, â€œìˆ«ì ê¸°ë°˜ ê¸°ëŒ€â€ê°€ ì¡´ì¬í•œë‹¤ê³  íŒë‹¨.<br><br>

<b>4) ê¸°ìˆ ì  íƒ€ì´ë° (T)</b><br>
- ê¸°ìˆ ì ìˆ˜: ${fmt(t.score)}ì  (ì…‹ì—…: <b>${t.setup||'-'}</b>)
- RSI(14): ${fmt(t.rsi14)} / MA20 ì´ê²©: ${pct(t.distMa20Pct)} / 20ì¼ê³ ì ëŒ€ë¹„: ${pct(t.from20dHighPct)}
- í•´ì„: ì¶”ì„¸ ì† ëˆŒë¦¼ì¸ì§€, ê³¼ì—´ ì¶”ê²©ì¸ì§€ êµ¬ë¶„í•´ì„œ ì§„ì… í’ˆì§ˆì„ í‰ê°€.<br><br>

<b>5) ëª¨ë©˜í…€ (M, ì°¸ê³ )</b><br>
- 1M: ${pct(m.m1Pct)} Â· 3M: ${pct(m.m3Pct)} Â· 6M: ${pct(m.m6Pct)}
- ëª¨ë©˜í…€ ì ìˆ˜: ${fmt(m.score)}ì 
- í•´ì„: ë‹¨ê¸°/ì¤‘ê¸°/ë°˜ê¸° íë¦„ì˜ ì¼ê´€ì„± ì²´í¬. (ì°¸ê³  ì§€í‘œ)<br><br>

<b>6) ë¦¬ìŠ¤í¬/ìœ ë™ì„± (V/L)</b><br>
- ìœ ë™ì„± ì ìˆ˜: ${fmt(liq)}ì 
- ë³€ë™ì„±: ${pct(risk.volPct)} / ìµœëŒ€ë‚™í­(MDD): ${pct(risk.maxDrawdownPct)} / ë¦¬ìŠ¤í¬ì ìˆ˜: ${fmt(risk.score)}
- í•´ì„: ë“¤ì–´ê°€ê³  ë‚˜ì˜¤ëŠ” ë¹„ìš©/ì¶©ê²© + í•˜ë½ ë‚´ì„±ê¹Œì§€ í¬í•¨í•œ í˜„ì‹¤ì„± ê²€ì¦.<br><br>

<b>7) ë‰´ìŠ¤/êµ°ì¤‘ ì‹œê·¸ë„ (C)</b><br>
- ì ìˆ˜: ${fmt(crowd.score)} / í†¤: ${fmt(crowd.tone,0)} / í—¤ë“œë¼ì¸ ìˆ˜: ${fmt(crowd.headlineCount,0)}
- í•´ì„: ì¬ë£Œ ê³¼ì—´ì¸ì§€, ì•…ì¬ ëˆ„ì  êµ¬ê°„ì¸ì§€ ì •ì„± ë¦¬ìŠ¤í¬ë¥¼ ìˆ˜ì¹˜í™”.<br><br>

<b>8) ì‹¤ì „ íŠ¸ë ˆì´ë“œ í•´ì„</b><br>
- ê¸°ëŒ€ìˆ˜ìµ-ì˜ˆìƒì†ì‹¤(ë‹¨ìˆœ ì—£ì§€): <b>${edge}%p</b>
- í•µì‹¬ì€ ë§ì¶”ê¸°ë³´ë‹¤ <b>ì†ìµë¹„ ê´€ë¦¬</b>. ì†ì ˆ ê¸°ì¤€ì´ ë¨¼ì €, ìµì ˆì€ ë’¤.
`;}
function scenarioTable(r){const cp=Number(r.currentPrice||0),tp1=Number(r.plan?.takeProfit1||0),sl=Number(r.plan?.stopLoss||0);const bull=((tp1/cp-1)*100)||0;const bear=((sl/cp-1)*100)||0;const base=(bull*0.55 + bear*0.45);return `
<b>ì‹œë‚˜ë¦¬ì˜¤ í”Œë˜ë‹ (ì˜ˆì‹œ)</b><br>
- Bull: ì¶”ì„¸ ì¬ê°€ì† â†’ 1ì°¨ ëª©í‘œ ${fmt(tp1)} (${pct(bull)})<br>
- Base: ë°•ìŠ¤ê¶Œ ì†Œí™” í›„ ì¬ìƒìŠ¹/íš¡ë³´ â†’ ê¸°ëŒ€ ${pct(base)} ê·¼ì²˜<br>
- Bear: ì§€ì§€ ì´íƒˆ â†’ ì†ì ˆ ${fmt(sl)} (${pct(bear)})<br>
`;}
function checklist(r){return `
<b>ì²´í¬ë¦¬ìŠ¤íŠ¸ (ë§¤ìˆ˜ ì „/ë³´ìœ  ì¤‘)</b><br>
1) ì§„ì…ê°€ê°€ ê³„íš ë²”ìœ„(${fmt(r.plan?.entryZone?.[0])}~${fmt(r.plan?.entryZone?.[1])}) ì•ˆì— ìˆëŠ”ê°€?<br>
2) ì¥ì¤‘ ê¸‰ë“± ì¶”ê²©ì€ ì•„ë‹Œê°€? (ì²´ê²° ê°•ë„/ê±°ë˜ëŒ€ê¸ˆ ê³¼ì—´ í™•ì¸)<br>
3) ì†ì ˆê°€(${fmt(r.plan?.stopLoss)})ë¥¼ ì‚¬ì „ì— ìˆ˜ìš© ê°€ëŠ¥í•œê°€?<br>
4) ë³´ìœ  ì¤‘ ë¬´íš¨í™” ì¡°ê±´ ì¶©ì¡± ì—¬ë¶€ë¥¼ ë§¤ì¼ í™•ì¸í•˜ëŠ”ê°€?<br>
5) ì¬ë£Œ(ë‰´ìŠ¤/ì‹¤ì /ê°€ì´ë˜ìŠ¤) ë³€í™” ì‹œ í”Œëœì„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ í–ˆëŠ”ê°€?<br>
`;}
function easyExplain(r){const c=r.components||{};const t=c.technical||{};const rc=c.reportConsensus||{};const rr=Number(r.riskReward||0);let tone='ì¤‘ë¦½';if(rr>=4&&Number(t.score||0)>=60)tone='ê³µê²©ì  ë§¤ìˆ˜ ìš°ìœ„';else if(rr>=3)tone='ë§¤ìˆ˜ ìš°ìœ„';else tone='ê´€ë§/ë¶„í•  ì ‘ê·¼';return `
<b>ì™œ ì§€ê¸ˆ ì§„ì… í›„ë³´ì¸ê°€? (ì‰½ê²Œ)</b><br>
- ëª©í‘œìˆ˜ìµ ëŒ€ë¹„ ì†ì‹¤ë¹„ìœ¨(RR)ì´ <b>${fmt(rr)}</b>ë¡œ ìœ ë¦¬í•œ í¸ì´ê³ ,<br>
- ê¸°ìˆ ì  êµ¬ì¡°ê°€ <b>${t.setup||'í™•ì¸ í•„ìš”'}</b> êµ¬ê°„ì´ë¼ ë¦¬ìŠ¤í¬ ê´€ë¦¬ê°€ ë¹„êµì  ëª…í™•í•¨.<br>
- ê¸°ê´€/ë¦¬í¬íŠ¸ í•©ì˜ë„ ${fmt(rc.score)}ì ìœ¼ë¡œ ë°›ì³ì£¼ê³  ìˆì–´ <b>${tone}</b> íŒë‹¨.
`;}
function verdictBadge(r){const rr=Number(r.riskReward||0), s=Number(r.score||0), t=Number(r?.components?.technical?.score||0); if(rr>=4.5&&s>=72&&t>=60) return "ğŸŸ¢ ê°•ë§¤ìˆ˜(ê³µê²©)"; if(rr>=3.2&&s>=62) return "ğŸŸ¡ ë¶„í• ë§¤ìˆ˜"; return "âšª ê´€ë§";}
function scenarioProb(r){const rr=Math.max(0,Number(r.riskReward||0)); let bull=Math.min(65, 30 + rr*6); let bear=Math.max(15, 35 - rr*3); let base=100-bull-bear; if(base<15){base=15; bull=100-base-bear;} return {bull:Math.round(bull), base:Math.round(base), bear:Math.round(bear)};}
function summarizeNews(r){const hs=(r?.components?.crowd?.headlines||[]).slice(0,3); if(!hs.length) return "- ìµœê·¼ í—¤ë“œë¼ì¸ ë°ì´í„°ê°€ ë¶€ì¡±í•´ ì¤‘ë¦½ìœ¼ë¡œ ì²˜ë¦¬.<br>- ë‰´ìŠ¤ ê³µë°± êµ¬ê°„ì—ì„œëŠ” ê°€ê²©/ê±°ë˜ëŒ€ê¸ˆ ì‹ í˜¸ë¥¼ ìš°ì„  í™•ì¸.<br>- ì´ë²¤íŠ¸(ì‹¤ì /ê³µì‹œ) ë°œìƒ ì‹œ ì¦‰ì‹œ ì¬í‰ê°€ í•„ìš”."; return hs.map((h,i)=>`- [${i+1}] ${h}`).join('<br>');}
function reportLinksHtml(r){const links=r?.components?.reportConsensus?.reportLinks||[]; if(!links.length) return "<b>í•œê²½ ë¦¬í¬íŠ¸ ë§í¬</b><br>- ë…¸ì¶œ ê°€ëŠ¥í•œ ë¦¬í¬íŠ¸ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤."; return `<b>í•œê²½ ë¦¬í¬íŠ¸ ë§í¬</b><br>`+links.map((x,i)=>`${i+1}) ${x.date||'-'} Â· ${x.broker||'-'} Â· <a href='${x.url}' target='_blank'>${x.title||'ë¦¬í¬íŠ¸ ë³´ê¸°'}</a>`).join('<br>');}
function renderBigCandles(d,el){const o=d.open.map(Number),h=d.high.map(Number),l=d.low.map(Number),c=d.close.map(Number),v=(d.volume||[]).map(Number);const m=o.length;if(!m){el.innerHTML='ë°ì´í„° ì—†ìŒ';return;}const sma=(arr,p)=>arr.map((_,i)=>i<p-1?null:arr.slice(i-p+1,i+1).reduce((a,b)=>a+b,0)/p);const ma20=sma(c,20),ma60=sma(c,60);const all=[...h,...l].filter(Number.isFinite);const w=940,hPx=340,pL=8,pR=52,pT=8,pB=14,volH=74,priceH=hPx-pT-pB-volH-8,plotW=w-pL-pR;const minRaw=Math.min(...all),maxRaw=Math.max(...all),pad=(maxRaw-minRaw)*0.06,min=minRaw-pad,max=maxRaw+pad,span=(max-min)||1;const y=v=>pT+(max-v)/span*priceH;const volTop=pT+priceH+8,maxVol=Math.max(...v.filter(Number.isFinite),1),slot=plotW/(m||1),bodyW=Math.max(2,Math.min(8,slot*0.62));const grid=[];for(let i=0;i<=4;i++){const gy=pT+(priceH/4)*i;grid.push(`<line x1='${pL}' y1='${gy}' x2='${w-pR}' y2='${gy}' stroke='#24304f'/>`);}const wick=[],body=[],vols=[];for(let i=0;i<m;i++){const cx=pL+slot*i+slot/2,oy=y(o[i]),cy=y(c[i]),hy=y(h[i]),ly=y(l[i]),up=c[i]>=o[i],color=up?'#22c55e':'#ef4444';wick.push(`<line x1='${cx}' y1='${hy}' x2='${cx}' y2='${ly}' stroke='${color}'/>`);body.push(`<rect x='${cx-bodyW/2}' y='${Math.min(oy,cy)}' width='${bodyW}' height='${Math.max(Math.abs(cy-oy),1.2)}' fill='${color}'/>`);const vv=Number.isFinite(v[i])?v[i]:0,vh=(vv/maxVol)*volH;vols.push(`<rect x='${cx-bodyW/2}' y='${volTop+(volH-vh)}' width='${bodyW}' height='${Math.max(vh,0.8)}' fill='${up?'#1f9d55':'#b91c1c'}' opacity='0.75'/>`);}const path=a=>a.map((x,i)=>Number.isFinite(x)?`${pL+slot*i+slot/2},${y(x)}`:'').filter(Boolean).join(' ');el.innerHTML=`<svg viewBox='0 0 ${w} ${hPx}' width='100%' height='340'><rect x='0' y='0' width='${w}' height='${hPx}' fill='#0f172a' rx='8'/>${grid.join('')}${wick.join('')}${body.join('')}<polyline fill='none' stroke='#f59e0b' stroke-width='1.4' points='${path(ma20)}'/><polyline fill='none' stroke='#60a5fa' stroke-width='1.4' points='${path(ma60)}'/><line x1='${pL}' y1='${volTop-1}' x2='${w-pR}' y2='${volTop-1}' stroke='#24304f'/>${vols.join('')}<text x='${w-pR+5}' y='${pT+10}' fill='#93a4c7' font-size='11'>${maxRaw.toLocaleString()}</text><text x='${w-pR+5}' y='${pT+priceH}' fill='#93a4c7' font-size='11'>${minRaw.toLocaleString()}</text><text x='${pL}' y='${hPx-2}' fill='#f59e0b' font-size='11'>MA20</text><text x='${pL+42}' y='${hPx-2}' fill='#60a5fa' font-size='11'>MA60</text></svg>`;}
(async()=>{const sym=getSymbol();const d=await (await fetch('/api/report?t='+Date.now())).json();const list=[...(d.riskAdjustedRankings||[]),...(d.highReturnRankings||[])];const map=new Map();for(const x of list){if(!map.has(x.symbol))map.set(x.symbol,x);}const r=map.get(sym)||d.topPick;if(!r){document.getElementById('head').innerHTML='ì¢…ëª©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';return;}const pr=scenarioProb(r);document.getElementById('head').innerHTML=`<div class='h'>${r.symbol} (${r.name})</div><div class='muted'>${verdictBadge(r)} Â· ì¢…í•©ì ìˆ˜ ${fmt(r.score)} / RR ${fmt(r.riskReward)} / í˜„ì¬ê°€ ${fmt(r.currentPrice)}</div>`;document.getElementById('quick').innerHTML=easyExplain(r)+`<br><b>ì‹œë‚˜ë¦¬ì˜¤ í™•ë¥ (ì£¼ê´€)</b><br>- Bull ${pr.bull}% / Base ${pr.base}% / Bear ${pr.bear}%`;document.getElementById('plan').innerHTML=`<b>ìš´ìš© í”Œëœ</b><br>ì§„ì…: ${fmt(r.plan.entryZone[0])} ~ ${fmt(r.plan.entryZone[1])}<br>ì†ì ˆ: ${fmt(r.plan.stopLoss)} / ìµì ˆ1: ${fmt(r.plan.takeProfit1)} / ìµì ˆ2: ${fmt(r.plan.takeProfit2)}<br>ì˜ˆìƒì†ì‹¤: ${pct(r.expectedLossPct)} / ì˜ˆìƒìˆ˜ìµ(1ì°¨): ${pct(r.expectedReturnPct)} / ì˜ˆìƒìˆ˜ìµ(2ì°¨): ${pct(r.expectedReturn2Pct)}<br>ìœ íš¨ê¸°ê°„: ${r.plan.ttlTradingDays} ê±°ë˜ì¼<br>ë¬´íš¨í™” ì¡°ê±´: ${r.plan.invalidationRule}`;document.getElementById('reasons').innerHTML=`<b>ì¶”ì²œ ê·¼ê±° ìƒì„¸ ì„¤ëª…</b><br><br>${longExplain(r)}<br>${scenarioTable(r)}<br>${checklist(r)}<br><b>ë‰´ìŠ¤ 3ì¤„ ìš”ì•½</b><br>${summarizeNews(r)}<br><br>${reportLinksHtml(r)}<br><br><a href='${r.links?.analysis||'#'}' target='_blank'>ë¦¬í¬íŠ¸ ì›ë¬¸(Analysis)</a> Â· <a href='${r.links?.news||'#'}' target='_blank'>ê´€ë ¨ ë‰´ìŠ¤</a>`;try{const ch=await (await fetch(`/api/chart/${encodeURIComponent(sym)}?period=6mo&interval=1d`)).json();if(ch.ok)renderBigCandles(ch,document.getElementById('chartArea'));else document.getElementById('chartArea').innerHTML='ì°¨íŠ¸ ë¡œë”© ì‹¤íŒ¨';}catch{document.getElementById('chartArea').innerHTML='ì°¨íŠ¸ ë¡œë”© ì‹¤íŒ¨';}})();</script></body></html>